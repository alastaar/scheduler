{"version":3,"file":"static/webpack/static/development/pages/calendar.js.afa61eb846a3f06669f3.hot-update.js","sources":["webpack:///./components/CalendarComponent.js","webpack:///./components/CalendarList.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { render } from \"react-dom\";\nimport gql from 'graphql-tag';\nimport moment from \"moment\";\nimport { Query } from 'react-apollo';\nimport User from './User';\nimport styled from 'styled-components';\nimport Link from 'next/link';\n\nconst SINGLE_REQUESTS_CALENDAR_QUERY = gql`\n  query SINGLE_REQUESTS_CALENDAR_QUERY($id: ID!) {\n    request(id: $id) {\n      id\n      name\n      email\n      details\n      dateOne\n      timeOne\n      approved\n      user{\n        name\n        lastName\n        email\n      }\n    }\n  }\n`;\n\nconst CalendarComponentStyles = styled.div`\n  height: 20px;\n  padding-left: 5px;\n  padding-right: 5px;\n  padding-top: 2px;\n  padding-bottom: 2px;\n`;\n\nconst CalendarStyled = styled.div`\n  a {\n    font-size: 10px;\n    margin: 0;\n    color: white;\n    vertical-align: top;\n\n  }\n`;\n\n\n\nclass CalendarComponent extends Component {\n  state = {\n    view: \"day\",\n    date: new Date(),\n    width: 500,\n    cal_events: [],\n  };\n\n  convertDate = (date) => {\n    return moment.utc(date).toDate()\n  }\n\n  convertTime = (time24) => {\n    var tmpArr = time24.split(':'), time12;\n    if(+tmpArr[0] == 12) {\n      time12 = tmpArr[0] + ':' + tmpArr[1] + ' pm';\n    }\n    else {\n      if(+tmpArr[0] == 0) {\n        time12 = '12:' + tmpArr[1] + ' am';\n      }\n      else {\n        if(+tmpArr[0] > 12) {\n          time12 = (+tmpArr[0]-12) + ':' + tmpArr[1] + ' pm';\n        }\n        else {\n          time12 = (+tmpArr[0]) + ':' + tmpArr[1] + ' am';\n        }\n      }\n    }\n    return time12;\n  }\n\n\n  render() {\n    return (\n      <User>\n        {({ data: { me } }) => (\n          <>\n          <CalendarStyled>\n            <Query query={SINGLE_REQUESTS_CALENDAR_QUERY}>\n              { ({ data, error, loading }) => {\n                if ( loading ) return <p> ... loading </p>;\n                if ( error ) return <p> ERROR: { error.message }</p>;\n                const request = data.request;\n                console.log(request);\n                return  <>\n                  {request.email === me.email && (\n                      <Link href={{pathname: '/request-item', query: { id: request.id },}}>\n                        <a>\n                          <CalendarComponentStyles style={{background: request.approved === \"no\" ? \"red\" : request.approved === \"yes\" ? \"black\" : \"gold\"}}>\n                            <div>\n                              { this.convertTime(request.timeOne) } with { request.name }\n                            </div>\n                          </CalendarComponentStyles>\n                        </a>\n                      </Link>\n\n                    )}\n                  </>\n              }}\n            </Query>\n          </CalendarStyled>\n        </>\n      )}\n    </User>\n    );\n  }\n}\n\nexport default CalendarComponent;\n","import React, { Component } from \"react\";\nimport { render } from \"react-dom\";\nimport gql from 'graphql-tag';\nimport events from '../lib/events';\nimport { perPage } from '../config';\nimport BigCalendar from \"react-big-calendar\";\nimport moment from \"moment\";\nimport CalendarStyles from './styles/CalendarStyles';\nimport debounce from 'lodash.debounce';\nimport { Query } from 'react-apollo';\nimport User from './User';\nimport CalendarComponent from './CalendarComponent';\n\nmoment.locale(\"en\");\nconst localizer = BigCalendar.momentLocalizer(moment);\n\nconst allViews = Object.keys(BigCalendar.Views).map(k => BigCalendar.Views[k]);\n\nconst ALL_REQUESTS_CALENDAR_QUERY = gql`\n  query ALL_REQUESTS_CALENDAR_QUERY {\n    requests(orderBy: createdAt_DESC) {\n      id\n      name\n      email\n      details\n      dateOne\n      timeOne\n      approved\n      user{\n        name\n        lastName\n        email\n      }\n    }\n  }\n`;\n\n\nclass CalendarList extends Component {\n  state = {\n    view: \"day\",\n    date: new Date(),\n    width: 500,\n    cal_events: [],\n  };\n\n  convertDate = (date) => {\n    return moment(date);\n  }\n\n  convertTime = (time24) => {\n    var tmpArr = time24.split(':'), time12;\n    if(+tmpArr[0] == 12) {\n      time12 = tmpArr[0] + ':' + tmpArr[1] + ' pm';\n    }\n    else {\n      if(+tmpArr[0] == 0) {\n        time12 = '12:' + tmpArr[1] + ' am';\n      }\n      else {\n        if(+tmpArr[0] > 12) {\n          time12 = (+tmpArr[0]-12) + ':' + tmpArr[1] + ' pm';\n        }\n        else {\n          time12 = (+tmpArr[0]) + ':' + tmpArr[1] + ' am';\n        }\n      }\n    }\n    return time12;\n  }\n\n\n  render() {\n    return (\n      <User>\n        {({ data: { me } }) => (\n        <CalendarStyles>\n        <div className=\"key\">\n          <div className=\"red\"></div><span>Pending</span>\n          <div className=\"black\"></div><span>Approved</span>\n          <div className=\"gold\"></div><span>Confirmed</span>\n        </div>\n        <Query query={ALL_REQUESTS_CALENDAR_QUERY}>\n          {({ data, loading, error }) => (\n            <div style={{ height: 500 }}>\n              <BigCalendar\n                localizer={localizer}\n                events={data.requests.filter(request => request.email === me.email).map((request, index) => ({\n                  title: this.convertTime(request.timeOne) + ' ' + request.user.name + ' ' + request.user.email,\n                  start: this.convertDate(request.dateOne),\n                  end: request.dateOne,\n                }))}\n                components={{\n                  event: CalendarComponent\n                }}\n              />\n            </div>\n          )}\n        </Query>\n        </CalendarStyles>\n      )}\n    </User>\n    );\n  }\n}\n\nexport default CalendarList;\nexport { ALL_REQUESTS_CALENDAR_QUERY };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAmBA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AACA;AAWA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAvBA;AA8BA;;;;AAnEA;AACA;AAqEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AAEA;AACA;AAmBA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AAKA;AACA;AADA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AARA;AA4BA;;;;AAjEA;AACA;AAmEA;;;;;A","sourceRoot":""}