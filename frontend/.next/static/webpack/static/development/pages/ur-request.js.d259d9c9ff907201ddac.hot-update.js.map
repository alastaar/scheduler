{"version":3,"file":"static/webpack/static/development/pages/ur-request.js.d259d9c9ff907201ddac.hot-update.js","sources":["webpack:///./components/DeleteRequest.js","webpack:///./components/RequesterPending.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Mutation } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport { ALL_ITEMS_QUERY } from './RequestList';\n\nconst DELETE_REQUEST_MUTATION = gql`\n  mutation DELETE_REQUEST_MUTATION($id: ID!) {\n    deleteRequest(id: $id) {\n      id\n    }\n  }\n`;\n\nclass DeleteRequest extends Component {\n  update = (cache, payload) => {\n    // manually update the cache on the client, so it matches the server\n    // 1. Read the cache for the items we want\n    const data = cache.readQuery({ query: ALL_REQUESTS_QUERY });\n    console.log(data, payload);\n    // 2. Filter the deleted itemout of the page\n    data.requests = data.requests.filter(request => requests.id !== payload.data.deleteRequest.id);\n    // 3. Put the items back!\n    cache.writeQuery({ query: ALL_REQUESTS_QUERY, data });\n  };\n  render() {\n    return (\n      <Mutation\n        mutation={DELETE_REQUEST_MUTATION}\n        variables={{ id: this.props.id }}\n        update={this.update}\n      >\n        {(deleteItem, { error }) => (\n          <button\n            onClick={() => {\n              if (confirm('Are you sure you want to delete this request?')) {\n                deleteRequest().catch(err => {\n                  alert(err.message);\n                });\n              }\n            }}\n          >\n            {this.props.children}\n          </button>\n        )}\n      </Mutation>\n    );\n  }\n}\n\nexport default DeleteRequest;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Link from 'next/link';\nimport Title from './styles/Title';\nimport ItemStyles from './styles/ItemStyles';\nimport PriceTag from './styles/PriceTag';\nimport formatMoney from '../lib/formatMoney';\nimport DeleteRequest from './DeleteRequest';\n\n\nclass RequesterPending extends Component {\n  static propTypes = {\n    request: PropTypes.object.isRequired,\n  };\n\n  convertTime = (time24) => {\n    var tmpArr = time24.split(':'), time12;\n    if(+tmpArr[0] == 12) {\n      time12 = tmpArr[0] + ':' + tmpArr[1] + ' pm';\n    }\n    else {\n      if(+tmpArr[0] == 0) {\n        time12 = '12:' + tmpArr[1] + ' am';\n      }\n      else {\n        if(+tmpArr[0] > 12) {\n          time12 = (+tmpArr[0]-12) + ':' + tmpArr[1] + ' pm';\n        }\n        else {\n          time12 = (+tmpArr[0]) + ':' + tmpArr[1] + ' am';\n        }\n      }\n    }\n    return time12;\n  }\n\n  render() {\n    const { request } = this.props;\n    return(\n      <ItemStyles>\n      { request.approved == 'no' &&\n      <>\n          { request.referenceImage && <img src={ request.referenceImage } alt={ request.title } />}\n          <Link href={{\n            pathname: '/request-item',\n            query: { id: request.id },\n         }}>\n            <a>\n              { request.user.name } { request.lastName }\n            </a>\n          </Link>\n          <Link href={{\n            pathname: '/request-item',\n            query: { id: request.id },\n         }}>\n            <a>\n              { request.user.email }\n            </a>\n          </Link>\n            <Link href={{\n              pathname: '/request',\n              query: { id: request.id },\n           }}>\n              <a>\n                { request.details }\n              </a>\n            </Link>\n           <div className=\"buttonList\">\n              <Link href={{\n                pathname: '/request',\n                query: { id: request.id, title: request.title, description: request.description, price: request.price },\n              }}>\n                <a>\n                  Update Request\n                </a>\n              </Link>\n              <DeleteRequest id={request.id}>Delete Request</DeleteRequest>\n           </div>\n          </>\n        }\n      </ItemStyles>\n    );\n  }\n}\n\nexport default RequesterPending;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AAOA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAeA;;;;AAjCA;AACA;AAmCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;AAKA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;;;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;;;;AAxEA;AACA;AADA;AAEA;AADA;AACA;AAyEA;;;;A","sourceRoot":""}