(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{21:function(e,t,n){"use strict";n.d(t,"a",function(){return O});var r=n(0),a=n.n(r),o=n(4),i=n(6),l=n(5),u=n.n(l),c=n(39),s=n(27);n(1);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(){var e=v(["\n  query {\n    users {\n      id\n      name\n      lastName\n      email\n      price\n      shop\n      instagramHandle\n      image\n      permissions\n      stripeToken\n      artist\n    }\n  }\n"]);return h=function(){return e},e}function g(){var e=v(["\n  mutation updatePermissions($permissions: [Permission], $userId: ID!) {\n    updatePermissions(permissions: $permissions, userId: $userId) {\n      id\n      permissions\n      name\n      lastName\n      email\n    }\n  }\n"]);return g=function(){return e},e}function v(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var k=["ADMIN","USER","TATTOOARTIST","PERMISSIONUPDATE"],w=u()(g()),O=u()(h()),P=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return r=this,a=(e=d(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==m(a)&&"function"!=typeof a?y(r):a,E(y(y(n)),"state",{permissions:n.props.user.permissions}),E(y(y(n)),"handlePermissionChange",function(e){var t=e.target,r=f(n.state.permissions);t.checked?r.push(t.value):r=r.filter(function(e){return e!==t.value}),n.setState({permissions:r})}),n}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props.user;return a.a.createElement(o.Mutation,{mutation:w,variables:{permissions:this.state.permissions,userId:this.props.user.id}},function(n,r){var o=r.loading,l=r.error;return a.a.createElement(a.a.Fragment,null,l&&a.a.createElement("tr",null,a.a.createElement("td",{colspan:"8"},a.a.createElement(i.a,{error:l}))),a.a.createElement("tr",null,a.a.createElement("td",null,t.name," ",t.lastName),a.a.createElement("td",null,t.email),k.map(function(n){return a.a.createElement("td",{key:n},a.a.createElement("label",{htmlFor:"".concat(t.id,"-permission-").concat(n)},a.a.createElement("input",{id:"".concat(t.id,"-permission-").concat(n),type:"checkbox",checked:e.state.permissions.includes(n),value:n,onChange:e.handlePermissionChange})))}),a.a.createElement("td",null,a.a.createElement(s.a,{type:"button",disabled:o,onClick:n},"Updat",o?"ing":"e"))))})}}])&&p(n.prototype,r),l&&p(n,l),t}();t.b=function(e){return a.a.createElement(o.Query,{query:O},function(e){var t=e.data,n=(e.loading,e.error);return a.a.createElement("div",null,a.a.createElement(i.a,{error:n}),a.a.createElement("div",null,a.a.createElement("h2",null,"Manage Permissions"),a.a.createElement(c.a,null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Name"),a.a.createElement("th",null,"Email"),k.map(function(e){return a.a.createElement("th",{key:e},e)}),a.a.createElement("th",null,"ðŸ‘‡ðŸ»"))),a.a.createElement("tbody",null,t.users.map(function(e){return a.a.createElement(P,{user:e,key:e.id})})))))})}},811:function(e,t,n){__NEXT_REGISTER_PAGE("/settings",function(){return e.exports=n(835),{page:e.exports.default}})},835:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(7),i=n.n(o),l=n(8),u=n(4),c=n(5),s=n.n(c),m=n(21),f=n(27);n(6);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  mutation DELETE_USER_MUTATION($id: ID!) {\n    deleteUser(id: $id) {\n      id\n    }\n  }\n"]);return h=function(){return e},e}var g=s()(h()),v=function(e){function t(){var e,n,r,a,o,i,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,c=new Array(u),s=0;s<u;s++)c[s]=arguments[s];return r=this,n=!(a=(e=b(t)).call.apply(e,[this].concat(c)))||"object"!==p(a)&&"function"!=typeof a?E(r):a,o=E(E(n)),l=function(e,t){var n=e.readQuery({query:m.a});n.users=n.users.filter(function(e){return e.id!==t.data.deleteUser.id}),e.writeQuery({query:m.a,data:n})},(i="update")in o?Object.defineProperty(o,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[i]=l,n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this;return a.a.createElement(u.Mutation,{mutation:g,variables:{id:this.props.id},update:this.update,refetchQueries:[{query:m.a}]},function(t,n){n.error;return a.a.createElement(f.a,{onClick:function(){confirm("Are you sure you want to delete this user?")&&t().catch(function(e){alert(e.message)})}},e.props.children)})}}])&&d(n.prototype,o),i&&d(n,i),t}(),k=n(3),w=(n(10),k.b.div.withConfig({displayName:"UserSettings__StyledBody",componentId:"uak1f8-0"})(["width:200px;margin:0 auto;color:black;p{display:inline-block;}a{display:inline-block;font-size:1rem;font-weight:700;background-color:black;color:white;padding:10px 20px;margin:10px;width:200px;text-align:center;}button{display:inline-block;font-size:1rem;background-color:red;color:white;padding:10px 30px;margin:10px;width:200px;text-align:center;}h2{color:#3399ff;display:inline-block;width:200px;text-align:center;}h3{margin-bottom:0;margin-top:0;}"])),O=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(w,null,a.a.createElement(l.b,null,function(e){var t=e.data.me;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Account Settings"),a.a.createElement("br",null),t&&a.a.createElement(a.a.Fragment,null,a.a.createElement(i.a,{href:{pathname:"/update",query:{id:t.id}}},a.a.createElement("a",{className:"userLink"},"Update Account Info")),!t.stripeToken&&a.a.createElement(a.a.Fragment,null,a.a.createElement("br",null),a.a.createElement(i.a,{href:{pathname:"/account",query:{id:t.id}}},a.a.createElement("a",{className:"userLink"},"Create Payment Info"))),!t.bankToken&&a.a.createElement(a.a.Fragment,null,a.a.createElement("br",null),a.a.createElement(i.a,{href:{pathname:"/bank",query:{id:t.id}}},a.a.createElement("a",{className:"userLink"},"Create Financial Info"))),t.stripeToken&&a.a.createElement(a.a.Fragment,null,a.a.createElement("br",null),a.a.createElement(i.a,{href:{pathname:"/accupdate",query:{id:t.id}}},a.a.createElement("a",{className:"userLink"},"Update Payment Info"))),t.bankToken&&a.a.createElement(a.a.Fragment,null,a.a.createElement("br",null),a.a.createElement(i.a,{href:{pathname:"/bank",query:{id:t.id}}},a.a.createElement("a",{className:"userLink"},"Update Financial Info"))),a.a.createElement("br",null),a.a.createElement(a.a.Fragment,null,a.a.createElement(i.a,{href:{pathname:"/preferences"}},a.a.createElement("a",{className:"userLink"},"Update Email Preferences"))),a.a.createElement(a.a.Fragment,null,a.a.createElement("br",null),a.a.createElement(i.a,{href:{pathname:"/blackout",query:{id:t.id}}},a.a.createElement("a",{className:"userLink"},"Update Black Out dates"))),a.a.createElement("br",null),a.a.createElement(v,{id:t.id},"Delete Account")),!t&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Sorry this is not your account")))})))},P=n(33);t.default=function(e){return a.a.createElement("div",null,a.a.createElement(P.a,null,a.a.createElement(O,null)))}}},[[811,1,0]]]);