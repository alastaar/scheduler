(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{821:function(e,t,a){__NEXT_REGISTER_PAGE("/update",function(){return e.exports=a(847),{page:e.exports.default}})},847:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),o=a.n(l),i=(a(7),a(8)),u=a(4),c=a(6),m=a(5),s=a.n(m),p=a(34),f=(a(39),a(27),a(1),a(15)),d=a.n(f);a(10);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){$(e,t,a[t])})}return e}function b(e,t,a,n,r,l,o){try{var i=e[l](o),u=i.value}catch(e){return void a(e)}i.done?t(u):Promise.resolve(u).then(n,r)}function y(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var l=e.apply(t,a);function o(e){b(l,n,r,o,i,"next",e)}function i(e){b(l,n,r,o,i,"throw",e)}o(void 0)})}}function v(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function I(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  mutation updateUserInfo($name: String, $lastName: String, $email: String, $instagramHandle: String, $shop: String, $profileImage: String, $image: String, $price: Int, $bio: String, $timeDetails: String, $userId: ID!) {\n    updateUserInfo(name: $name, lastName: $lastName, email: $email, instagramHandle: $instagramHandle, shop: $shop, profileImage: $profileImage, image: $image, price: $price, bio: $bio, timeDetails: $timeDetails, userId: $userId) {\n      id\n      name\n      lastName\n      email\n      instagramHandle\n      shop\n      profileImage\n      image\n      price\n      bio\n      timeDetails\n    }\n  }\n"]);return I=function(){return e},e}var O=s()(I()),C=function(e){function t(){var e,a,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,i=new Array(l),u=0;u<l;u++)i[u]=arguments[u];return n=this,r=(e=E(t)).call.apply(e,[this].concat(i)),a=!r||"object"!==h(r)&&"function"!=typeof r?S(n):r,$(S(S(a)),"state",{imageDone:!0}),$(S(S(a)),"handleUserChange",function(e){var t=e.target,n=t.name,r=t.type,l=t.value,o="number"===r?100*parseFloat(l):l;a.setState($({},n,o)),a.setState({name:nameVal.value,lastName:lastName.value,email:email.value})}),$(S(S(a)),"divideByHundred",function(e){return e/100}),$(S(S(a)),"updateUserInfo",function(){var e=y(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),1!=a.state.imageDone){e.next=7;break}return e.next=4,n({variables:g({},a.state)});case 4:e.sent,e.next=8;break;case 7:alert("Image has not uploaded yet. Please try resubmitting.");case 8:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),$(S(S(a)),"uploadFile",function(){var e=y(o.a.mark(function e(t){var n,r,l,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({imageDone:!1}),console.log("uploading file ..... "),n=t.target.files,(r=new FormData).append("file",n[0]),r.append("upload_preset","sickfits"),e.next=8,fetch("https://api.cloudinary.com/v1_1/a1995/image/upload",{method:"POST",body:r});case 8:return l=e.sent,e.next=11,l.json();case 11:i=e.sent,a.setState({profileImage:i.secure_url,image:i.eager[0].secure_url,imageDone:!0});case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),a}var a,l,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,n["Component"]),a=t,(l=[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,null,function(t){var a=t.data.me;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Account Details"),r.a.createElement(u.Mutation,{mutation:O,variables:g({},e.state,{userId:e.props.id}),refetchQueries:[{query:i.a}]},function(t,n){var l=n.loading,o=n.error;return r.a.createElement(p.a,{onSubmit:function(a){e.updateUserInfo(a,t),d.a.push({pathname:"/me"})}},r.a.createElement(c.a,{error:o}),r.a.createElement("fieldset",{disabled:l,"aria-busy":l},r.a.createElement("label",{htmlFor:"name"},"First Name",r.a.createElement("input",{type:"text",id:"nameVal",name:"nameVal",placeholder:"name",required:!0,defaultValue:a.name,onChange:e.handleUserChange})),r.a.createElement("label",{htmlFor:"lastName"},"Last Name",r.a.createElement("input",{type:"text",id:"lastName",name:"lastName",placeholder:"lastName",required:!0,defaultValue:a.lastName,onChange:e.handleUserChange})),r.a.createElement("label",{htmlFor:"email"},"Email",r.a.createElement("input",{type:"text",id:"email",name:"email",placeholder:"email",required:!0,defaultValue:a.email,onChange:e.handleUserChange})),r.a.createElement("label",{htmlFor:"price"},"Price for booking $$",r.a.createElement("input",{type:"number",min:"0",step:"1","data-number-to-fixed":"2","data-number-stepfactor":"100",id:"price",name:"price",placeholder:"price",required:!0,defaultValue:e.divideByHundred(a.price),onChange:e.handleUserChange})),r.a.createElement("label",{htmlFor:"bio"},"Bio",r.a.createElement("textarea",{id:"bio",name:"bio",placeholder:"Enter a bio",defaultValue:a.bio,onChange:e.handleUserChange})),r.a.createElement("label",{htmlFor:"instagramHandle"},"Instagram Handle",r.a.createElement("input",{type:"text",id:"instagramHandle",name:"instagramHandle",placeholder:"Instagram Handle",defaultValue:a.instagramHandle,onChange:e.handleUserChange})),r.a.createElement("label",{htmlFor:"shop"},"Shop",r.a.createElement("input",{type:"text",id:"shop",name:"shop",placeholder:"Shop",defaultValue:a.shop,onChange:e.handleUserChange})),r.a.createElement("label",{htmlFor:"profileImage"},"Profile Image",r.a.createElement("input",{type:"file",id:"profileImage",name:"profileImage",placeholder:"Upload a Profile image",onChange:e.uploadFile}),e.state.image&&r.a.createElement("img",{src:e.state.image,alt:"upload preview"}),r.a.createElement("button",{type:"submit"},"Sav",l?"ing":"e"," Changes"))))}),a&&r.a.createElement(r.a.Fragment,null),!a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Sorry this is not your account please move along ")))}))}}])&&v(a.prototype,l),m&&v(a,m),t}(),x=a(33);t.default=function(e){return r.a.createElement("div",null,r.a.createElement(x.a,null,r.a.createElement(C,{id:e.query.id})))}}},[[821,1,0]]]);